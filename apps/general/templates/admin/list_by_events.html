{% extends 'base/index_forms.html' %}
{% load static %}

{% if user.is_authenticated %} 
{% if request.user.is_staff %}


{% block content %}


{% if  object_list|length == 0 %}
    <td><h2>Do not registers</h2></td>
{% endif %}


<div class="justify-content-center pt-5   bg-white small bg-opacity-75 text-black">
    <br><br>
<h4 class="text-center pt-4" style="color:#A57F12; font-weight: bold;">{{object_list|length}} events </h4>    
<div class=" container ">

    
    <form method="GET">
        <br>
        <h4 class="" style="color:green; font-weight: bold">{{tournament}}</h4>
        
        <div  style="overflow-x:auto; ">
            <table id = "" class="display compact table-light" >
                <thead>
                    <tr class="">
                        
                       
                        <th>Event</th>
                        <th>Date</th>
                        <th>Place</th>
                        <th>Registered</th>
                        <th>Active</th>
                        <th>Pending</th>
                        <th>Registered List</th>
                        <th>Status</th>
                       

                    </tr>
                </thead>

                <tbody>
                    {% if object_list %}
                    
                        {% for t in object_list %}
                        {{t}} - {{t.date}} //
                            <tr>
                               
                                <td>
                                    <p class=""  >
                                            <a style="color:#F26B1E" ><b>{{t}}</b></a></p>
                                </td>
                                 <td>{{t.date}}</td>
                                <td>
                                    {{t.place}}</p>
                                </td>
                                

                                {% for key , value in registered.items %}
                                {% if t == key %}
                                    <td style="text-align:center;"><b>{{value.0}}</b></td>
                                    <td style="text-align:center;">{{value.1}}</td>
                                    
                                    {% if value.2 > 0 %}
                                        <td style="color:red; text-align:center;">{{value.2}}</td>
                                        {% else %}
                                        <td style="text-align:center;">{{value.2}}</td>
                                    {% endif %}
                                {% endif %}
                                {% endfor %}

                                
                                <td>
                                    <a href={% url 'list_register_event' t.id %} class="link-success text-end pb-1 "><b>Registered List</b></a>
                                </td>

                                {% if t.condition %}
                                    <td><span class="badge bg-info">Active</span></td>
                                {% else %}
                                    <td><span class="badge bg-info-light">Not active</span></td>
                                {% endif %}
                                
                                
                            </tr>
                           
                        {% endfor %}
                    {% else%}
                        <tr>
                            <td><h2>Do not register</h2></td>
                        </tr>
                        
                    {% endif %}
                
                </tbody>
            </table>
            <br>
        </div>
    </form>   
 
</div> 
</div>

   
{% endblock  %}          
{% endif %}       
{% endif %}

      
